import{l as j,i as v,r as n,B as c,j as t,Q as k,k as T}from"./index-D8y7tREh.js";import{D as b}from"./index-ky0hfpzh.js";import{v as N}from"./authClient-CRicmCU6.js";import{T as w,G as l,B as m}from"./Grid-C3qmDbmo.js";import{T as h}from"./Typography-DHzf4aXy.js";import"./index-VWaDGczM.js";import"./axiosClient-f7rFmG3x.js";import"./axios-B6xwUs71.js";function M(u){const g=j(),x=v(),[f,s]=n.useState(""),[o,d]=n.useState(""),[a,p]=n.useState(""),i=u.title;n.useEffect(()=>{document.title=i?`${i}`:"Trang không tồn tại";const e=new URLSearchParams(window.location.search),r=e.get("type");d(r),p(e.get("token"))},[i]),n.useEffect(()=>{o==="verifyEmailSuccess"?(s("Tài khoản của bạn đã được xác minh. Bạn có thể đăng nhập vào tài khoản của mình ngay bây giờ."),y().then(e=>console.log(e))):o==="verifyEmail"?s("Một email đã được gửi đến địa chỉ email của bạn. Vui lòng kiểm tra email để xác minh tài khoản của bạn."):o==="forgotPassword"&&s("Một email đã được gửi đến địa chỉ email của bạn. Vui lòng kiểm tra email của bạn để đặt lại mật khẩu.")},[o,a]);const y=async()=>{if(!a||!a.startsWith("AVG_")||!a.endsWith("_VNLAW")){const e="Mã không hợp lệ. Vui lòng thử lại.";s(e),c.error(e,{autoClose:1e3,buttonClose:!1});return}try{const e=await N({token:a});console.log(e);let r=e.message;c.success(r,{onClose:()=>x("/"),autoClose:2e3,buttonClose:!1})}catch(e){c.error(e.message),console.error("Error fetching server: ",e),s(e.message)}};return t.jsxs(w,{theme:g,children:[t.jsx(k,{}),t.jsx(l,{container:!0,component:"main",className:"min-h-screen",alignItems:"center",justifyContent:"center",children:t.jsx(l,{item:!0,xs:12,elevation:6,children:t.jsx(m,{className:"mx-4 my-5",children:t.jsxs(m,{className:"w-full px-5 py-6 mx-auto rounded shadow-2xl sm:w-8/12 lg:w-4/12",children:[t.jsxs("div",{className:"mb-2 text-center",children:[t.jsx("div",{className:"flex justify-center ",children:t.jsx("img",{loading:"lazy",className:"!w-2/4 ",src:T,alt:"Logo"})}),t.jsx(h,{variant:"h6",className:" !text-sm italic !text-blue-gray-950",children:"Tri Thức Pháp Luật Việt Nam"})]}),t.jsx("div",{children:t.jsx(b,{src:"https://lottie.host/59f5e53d-ce7c-4d60-aaa9-7ba750fc86a8/OhazetStzz.json",loop:!0,autoplay:!0,direction:"1"})}),t.jsx(h,{variant:"h6",className:"!text-sm !text-blue-gray-950 !text-center",children:f})]})})})})]})}export{M as default};
