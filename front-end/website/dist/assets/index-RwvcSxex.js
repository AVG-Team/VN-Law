import{k as F,r as t,j as e,L as V,B as f,l as B,Q as M}from"./index-My25IbSw.js";import{a as q}from"./authClient-Duo7ZNvI.js";import{O as z}from"./Oauth2-DL2WCXEk.js";import{h as I,S as O,T as w,a as R,F as W,L as g}from"./react-google-recaptcha-v3.esm-jj7wIgQQ.js";import{B as c,G as m,T as D}from"./Grid-CUUsxw8B.js";import{T as j}from"./Typography-imvbprKe.js";import{a as y}from"./Button-bSIZdepH.js";import"./axiosClient-AxkGwTzS.js";import"./Paper-DzHy89ND.js";function G(){const u=F(),[s,n]=t.useState({}),[h,k]=t.useState(!1),[v,N]=t.useState(!1),[b,S]=t.useState(null),C="6LfJywMqAAAAAEk2nw2ghStxujeIzedVb3xOvW6U",[T,x]=t.useState(!1),[a,E]=t.useState({email:"",password:""}),L=o=>{S(o)};async function P(o){o.preventDefault();const{email:l,password:i}=a,r={};if(l.trim()?/\S+@\S+\.\S+/.test(l)||(r.email="Email không hợp lệ"):r.email="Email là bắt buộc",i.trim()?i.length<8&&(r.password="Mật khẩu phải có ít nhất 8 kí tự"):r.password="Mật khẩu là bắt buộc",n(r),Object.keys(r).length===0)try{x(!0);const d=await q({email:a.email,password:a.password,recaptchaToken:b});f.success(d.message,{onClose:()=>u("/"),autoClose:1e3})}catch(d){f.error(d.message,{autoClose:1e3}),console.error(d.message)}finally{x(!1)}}function p(o){const{name:l,value:i}=o.target;E({...a,[l]:i}),l==="password"&&N(i!=="")}function A(){k(!h)}return e.jsxs(c,{className:"px-5 mx-auto rounded shadow-2xl py-7 sm:w-6/12 lg:w-4/12",children:[e.jsxs("div",{className:"mb-2 text-center",children:[e.jsx("div",{className:"flex justify-center ",children:e.jsx("img",{loading:"lazy",className:"!w-2/4 ",src:V,alt:"Logo"})}),e.jsx(j,{variant:"h6",className:" !text-sm italic !text-blue-gray-950",children:"Tri Thức Pháp Luật Việt Nam"})]}),e.jsx(I,{reCaptchaKey:C,language:"vi",children:e.jsxs(c,{component:"form",validate:"true",onSubmit:P,className:"mt-1 text-center",children:[e.jsx(O,{onVerify:L}),e.jsx(w,{margin:"normal",fullWidth:!0,id:"email",type:"email",label:"Email",name:"email",autoComplete:"email",autoFocus:!0,onChange:p,value:a.email,required:!0}),s.email&&e.jsx(c,{className:"text-sm text-left text-red-500",children:s.email}),e.jsx(w,{margin:"normal",fullWidth:!0,name:"password",label:"Mật khẩu",type:h?"text":"password",id:"password",onChange:p,autoComplete:"current-password",value:a.password,required:!0,InputProps:{endAdornment:v&&e.jsx(y,{onClick:A,children:h?e.jsx(R,{className:"block w-5 h-5 text-black","aria-hidden":"true"}):e.jsx(W,{className:"block w-5 h-5 text-black","aria-hidden":"true"})})}}),s.password&&e.jsx(c,{className:"text-sm text-left text-red-500",children:s.password}),e.jsxs(y,{type:"submit",variant:"contained",className:"!mx-auto !my-8",children:[T&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Đăng nhập"]})]})}),e.jsx(z,{}),e.jsxs(m,{container:!0,className:"justify-between",children:[e.jsx(m,{item:!0,children:e.jsx(g,{underline:"none",href:"/quen-mat-khau",variant:"body2",children:"Quên mật khẩu?"})}),e.jsxs(m,{item:!0,className:"flex flex-row",children:[e.jsx(j,{className:"left-0 px-1 pt-[2px]",variant:"body2",children:"Bạn không có tài khoản?"}),e.jsx(g,{underline:"none",className:"!mt-[2px]",href:"/dang-ky",variant:"body2",children:"Đăng ký"})]})]})]})}function _(u){const s=B(),n=u.title;return t.useEffect(()=>{document.title=n?`${n}`:"Trang không tồn tại"},[n]),e.jsxs(D,{theme:s,children:[e.jsx(M,{}),e.jsx(m,{container:!0,component:"main",className:"min-h-screen",alignItems:"center",justifyContent:"center",children:e.jsx(m,{item:!0,xs:12,elevation:6,children:e.jsx(c,{className:"mx-4 my-5",children:e.jsx(G,{})})})})]})}export{_ as default};
