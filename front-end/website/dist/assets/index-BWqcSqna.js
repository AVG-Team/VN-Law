import{k as H,r,j as e,L as $,B as y,l as G,Q as K}from"./index-9L6wJ83p.js";import{r as U}from"./authClient-BKUtwAWw.js";import{O as W}from"./Oauth2-C4pQucZD.js";import{h as q,S as J,T as d,F as N,a as v,L as Q}from"./react-google-recaptcha-v3.esm-G3pOvzvS.js";import{B as n,G as u,T as X}from"./Grid-DmxPs4LF.js";import{T as C}from"./Typography-DIWVQ_6Q.js";import{a as w}from"./Button-DGdxTZev.js";import"./axiosClient-2XVY61_1.js";import"./Paper-Bcryvif_.js";function Y(){const h=H(),[s,i]=r.useState({}),[x,P]=r.useState(!1),[S,T]=r.useState(!1),[f,E]=r.useState(!1),[V,A]=r.useState(!1),[g,j]=r.useState(!1),[a,F]=r.useState({name:"",email:"",password:"",confirmPassword:""}),[L,B]=r.useState(null),M="6LfJywMqAAAAAEk2nw2ghStxujeIzedVb3xOvW6U",R=l=>{B(l)};async function z(l){l.preventDefault();const{name:m,email:o,password:p,confirmPassword:b}=a,t={};if(m.trim()||(t.name="Tên người dùng là bắt buộc"),o.trim()?/\S+@\S+\.\S+/.test(o)||(t.email="Email không hợp lệ"):t.email="Email là bắt buộc",p.trim()?p.length<8&&(t.password="Mật khẩu phải có ít nhất 8 kí tự"):t.password="Mật khẩu là bắt buộc",b.trim()?b!==p&&(t.confirmPassword="Mật khẩu không khớp"):t.confirmPassword="Nhập lại mật khẩu là bắt buộc",i(t),Object.keys(t).length===0)try{j(!0);let D=(await U({name:a.name,email:a.email,password:a.password,recaptchaToken:L})).message;y.success(D,{onClose:()=>h("/dang-nhap"),autoClose:1e3,buttonClose:!1})}catch(k){y.error(k.message)}finally{j(!1)}}function c(l){const{name:m,value:o}=l.target;F({...a,[m]:o}),m==="password"?T(o!==""):m==="confirmPassword"&&A(o!=="")}function I(){P(!x)}function O(){E(!f)}return e.jsxs(n,{className:"w-full px-5 py-6 mx-auto rounded shadow-2xl sm:w-8/12 lg:w-4/12",children:[e.jsxs("div",{className:"mb-2 text-center",children:[e.jsx("div",{className:"flex justify-center ",children:e.jsx("img",{loading:"lazy",className:"!w-2/4 ",src:$,alt:"Logo"})}),e.jsx(C,{variant:"h6",className:" !text-sm italic !text-blue-gray-950",children:"Tri Thức Pháp Luật Việt Nam"})]}),e.jsx(q,{reCaptchaKey:M,language:"vi",children:e.jsxs(n,{component:"form",validate:"true",onSubmit:z,className:"flex flex-col mt-1 text-center",children:[e.jsx(J,{onVerify:R}),e.jsx(d,{margin:"normal",id:"name",type:"name",label:"Tên người dùng",name:"name",autoComplete:"name",onChange:c,value:a.name,autoFocus:!0}),s.name&&e.jsx(n,{className:"text-sm text-left text-red-500",children:s.name}),e.jsx(d,{margin:"normal",id:"email",type:"email",label:"Email",name:"email",autoComplete:"email",onChange:c,value:a.email,autoFocus:!0}),s.email&&e.jsx(n,{className:"text-sm text-left text-red-500",children:s.email}),e.jsx(d,{margin:"normal",name:"password",label:"Mật khẩu",type:x?"text":"password",id:"password",onChange:c,value:a.password,autoComplete:"current-password",InputProps:{endAdornment:S&&e.jsx(w,{className:"eye-button",onClick:I,children:x?e.jsx(N,{className:"block w-5 h-5 text-black","aria-hidden":"true"}):e.jsx(v,{className:"block w-5 h-5 text-black","aria-hidden":"true"})})}}),s.password&&e.jsx(n,{className:"text-sm text-left text-red-500",children:s.password}),e.jsx(d,{margin:"normal",name:"confirmPassword",label:"Nhập lại mật khẩu",type:f?"text":"password",id:"confirmPassword",onChange:c,value:a.confirmPassword,autoComplete:"current-password",InputProps:{endAdornment:V&&e.jsx(w,{className:"eye-button",onClick:O,children:f?e.jsx(N,{className:"block w-5 h-5 text-black","aria-hidden":"true"}):e.jsx(v,{className:"block w-5 h-5 text-black","aria-hidden":"true"})})}}),s.confirmPassword&&e.jsx(n,{className:"text-sm text-left text-red-500",children:s.confirmPassword}),e.jsxs(w,{type:"submit",variant:"contained",className:`!mx-auto !my-8 transition duration-300 ease-in-out ${g?"!bg-gray-300":"!bg-indigo-500 hover:!bg-indigo-700"}`,children:[g&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Đăng ký"]}),e.jsx(u,{container:!0,className:"justify-center mt-5",children:e.jsxs(u,{item:!0,className:"flex flex-row",children:[e.jsx(C,{className:"mr-0.5 px-1",variant:"body2",children:"Bạn đã có tài khoản?"}),e.jsx(Q,{underline:"none",href:"/dang-nhap",variant:"body2",children:"Đăng nhập"})]})})]})}),e.jsx(W,{})]})}function ie(h){const s=G(),i=h.title;return r.useEffect(()=>{document.title=i?`${i}`:"Trang không tồn tại"},[i]),e.jsxs(X,{theme:s,children:[e.jsx(K,{}),e.jsx(u,{container:!0,component:"main",className:"min-h-screen",alignItems:"center",justifyContent:"center",children:e.jsx(u,{item:!0,xs:12,elevation:6,children:e.jsx(n,{className:"mx-5 ",children:e.jsx(Y,{})})})})]})}export{ie as default};
